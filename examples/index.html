<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vanilla router</title>
</head>
<body>
<pre>Open console log to see the logs</pre>
<h1 id="title"></h1>
<script src="../index.js"></script>
<script>
    var router = new Router({
        mode: 'hash',
        root: '/index.html',
        hooks: {
            before: function (newPage) {
                console.info('Before page loads hook', newPage);
            }
        },
        page404: function (path) {
            console.log('"/' + path + '" Page not found');
        }
    });

    router
            .add('', function () {
                console.log('Home page');
                document.getElementById('title').innerHTML = "Home Page";
            })
            .add('search', function () {
                console.log('Search Page');
                document.getElementById('title').innerHTML = 'Search for: ' + this.query.q;
            }, {
                unloadCb: function (page, async) {
                    console.log('This hook should be the synchronous request and should return true or false');
                    if (async) {
                        return Promise.reject(false);
                    }
                    return false;
                }
            })
            .add('(:num)-(:num)-(:num)/report', function(year, month, day) {
                console.log(year, month, day);
            })
            .add('hello/(:any)', function (name) {
                console.log('Hello, ' + name, this.state);
                document.getElementById('title').innerHTML = 'Hello, ' + name;
            })
            .add('about', function () {
                console.log('About Page');
                document.getElementById('title').innerHTML = 'About Page';
            })
            .remove('about')
            .check()
            .addUriListener()
            .navigateTo('hello/World', {foo: "bar"})
            .refresh();

    window.router = router;
</script>
</body>
</html>
